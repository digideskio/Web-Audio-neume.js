!function t(e,n,i){function o(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return o(n?n:t)},f,f.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e){"use strict";var n=t("./src/");n.use(t("./src/ugen/")),"undefined"!=typeof window&&(window.neume=n),e.exports=n},{"./src/":18,"./src/ugen/":37}],2:[function(t,e){"use strict";function n(t,e){o.call(this),this.$context=t,this.$outlet=null,this._node=i.defaults(e,null)}var i=t("../util"),o=t("../event/emitter");i.inherits(n,o),n.$name="NeuComponent",n.prototype.toAudioNode=function(){return null===this.$outlet&&(this.$outlet=this.$context.toAudioNode(i.defaults(this._node,this))),this.$outlet},n.prototype.connect=function(t){return this.$context.connect(i.defaults(this._node,this),t),this},n.prototype.disconnect=function(){return this.$context.disconnect(i.defaults(this._node,this)),this},e.exports=i.NeuComponent=n},{"../event/emitter":17,"../util":49}],3:[function(t,e){(function(n){"use strict";function i(t,e){a.call(this,t),this._value=u.finite(e)}function o(t,e){for(var n=new Float32Array(t),i=0;t>i;i++)n[i]=e;return n}function r(t,e){var n=null,i=t.createBuffer(1,s.DC_BUF_SIZE,t.sampleRate),o=n=t.createBufferSource();return i.getChannelData(0).set(0===e?c:f),o.buffer=i,o.loop=!0,o.start(0),0!==e&&1!==e&&(n=t.createGain(),n.gain.value=u.finite(e),t.connect(o,n)),n}var s=t("../const"),u=t("../util"),a=t("./component"),c=new o(s.DC_BUF_SIZE,0),f=new o(s.DC_BUF_SIZE,1);u.inherits(i,a),i.$name="NeuDC",i.prototype.toAudioNode=function(){return null===this.$outlet&&(this.$outlet=r(this.$context,this._value)),this.$outlet},i.prototype.connect=function(t){return t instanceof n.AudioParam?t.value=this._value:this.$context.connect(this.toAudioNode(),t),this},i.prototype.disconnect=function(){return this.$context.disconnect(this.$outlet),this},i.prototype.valueOf=function(){return this._value},e.exports=u.NeuDC=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../const":7,"../util":49,"./component":2}],4:[function(t,e){"use strict";function n(t,e,n,i){u.call(this,t),this._dryIn=e,this._wetIn=n,this._mixIn=i}function i(t,e,n,i){if(i=s.clip(s.finite(i),0,1),1===i)return n;if(0===i)return e;var o=t.createGain(),r=t.createGain(),u=t.createGain();return o.gain.value=i,r.gain.value=1-i,t.connect(e,r),t.connect(n,o),t.connect(o,u),t.connect(r,u),u}function o(t,e,n,i){var o=t.createGain(),r=t.createGain(),s=t.createGain(),u=t.createWaveShaper(),a=t.createWaveShaper();return u.curve=c,a.curve=f,t.connect(i,u),t.connect(i,a),o.gain.value=0,r.gain.value=0,t.connect(u,o.gain),t.connect(a,r.gain),t.connect(e,r),t.connect(n,o),t.connect(o,s),t.connect(r,s),s}var r=t("../const"),s=t("../util"),u=t("./component"),a=r.WS_CURVE_SIZE,c=new Float32Array(a),f=new Float32Array(a);!function(){for(var t=a>>1,e=0;t>e;e++)c[e]=0,f[e]=1,c[e+t]=Math.sin(e/t*Math.PI*.5),f[e+t]=Math.cos(e/t*Math.PI*.5)}(),s.inherits(n,u),n.$name="NeuDryWet",n.prototype.toAudioNode=function(){if(null===this.$outlet){var t,e=this.$context;t="number"==typeof this._mixIn?i(e,this._dryIn,this._wetIn,this._mixIn):o(e,this._dryIn,this._wetIn,this._mixIn),this.$outlet=e.toAudioNode(t),this._dryIn=null,this._wetIn=null,this._mixIn=null}return this.$outlet},e.exports=n},{"../const":7,"../util":49,"./component":2}],5:[function(t,e){(function(n){"use strict";function i(t,e,n){n=n||{},r.call(this,t),this._value=o.finite(e),this._params=[],/\d+(ticks|n)|\d+\.\d+\.\d+/.test(n.timeConstant)?(this._relative=!0,this._timeConstant=n.timeConstant):(this._relative=!1,this._timeConstant=Math.max(0,o.finite(n.timeConstant)))}var o=t("../util"),r=t("./component");o.inherits(i,r),i.$name="NeuParam",i.prototype.valueOf=function(){return this._params.length?this._params[0].value:this._value},i.prototype.set=function(t){t=o.finite(t);var e=this.$context.currentTime,n=this._params;this._value=t;for(var i=0,r=n.length;r>i;i++)n[i].value=t,n[i].setValueAtTime(t,e);return this},i.prototype.setAt=function(t,e){t=o.finite(t),e=o.finite(this.$context.toSeconds(e));for(var n=this._params,i=0,r=n.length;r>i;i++)n[i].setValueAtTime(t,e);return this},i.prototype.linTo=function(t,e){t=o.finite(t),e=o.finite(this.$context.toSeconds(e));for(var n=this._params,i=0,r=n.length;r>i;i++)n[i].linearRampToValueAtTime(t,e);return this},i.prototype.expTo=function(t,e){t=o.finite(t),e=o.finite(this.$context.toSeconds(e));for(var n=this._params,i=0,r=n.length;r>i;i++)n[i].exponentialRampToValueAtTime(t,e);return this},i.prototype.targetAt=function(t,e,n){t=o.finite(t),e=o.finite(this.$context.toSeconds(e)),n=o.finite(this.$context.toSeconds(n));for(var i=this._params,r=0,s=i.length;s>r;r++)i[r].setTargetAtTime(t,e,n);return this},i.prototype.curveAt=function(t,e,n){e=o.finite(this.$context.toSeconds(e)),n=o.finite(this.$context.toSeconds(n));for(var i=this._params,r=0,s=i.length;s>r;r++)i[r].setValueCurveAtTime(t,e,n);return this},i.prototype.cancel=function(t){t=o.finite(this.$context.toSeconds(t));for(var e=this._params,n=0,i=e.length;i>n;n++)e[n].cancelScheduledValues(t);return this},i.prototype.update=function(t,e,n){if(t=o.finite(this.$context.toSeconds(t)),e=o.finite(e),n=o.finite(o.defaults(n,e)),0===this._timeConstant||n===e)this.setAt(e,t);else{var i;i=this._relative?this.$context.toSeconds(this._timeConstant):this._timeConstant,this.targetAt(e,t,i)}return this},i.prototype.toAudioNode=function(){return null==this.$outlet&&(this.$outlet=this.$context.createGain(),this.$outlet.gain.value=this._value,this.$outlet.gain.setValueAtTime(this._value,0),this._params.push(this.$outlet.gain),this.$context.connect(this.$context.createNeuDC(1),this.$outlet)),this.$outlet},i.prototype.connect=function(t){return t instanceof n.AudioParam?(t.value=this._value,t.setValueAtTime(this._value,0),this._params.push(t)):this.$context.connect(this.toAudioNode(),t),this},i.prototype.disconnect=function(){return this.$context.disconnect(this.$outlet),this},e.exports=o.NeuParam=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":49,"./component":2}],6:[function(t,e){"use strict";function n(t,e){o.call(this,t);for(var n=0,r=!1,s=null,u=[],a=0,c=e.length;c>a;a++)"number"==typeof e[a]?(n+=i.finite(e[a]),r=!0):e[a]instanceof i.NeuDC?(n+=e[a].valueOf(),r=!0):!s&&e[a]instanceof i.NeuParam?s=e[a]:u.push(e[a]);return 0===u.length?s?s:t.createNeuDC(n):0===n&&null===s&&1===u.length?t.createNeuComponent(u[0]):(this._hasNumber=r,this._number=n,this._param=s,this._nodes=u,void(this._inputs=e))}var i=t("../util"),o=t("./component");i.inherits(n,o),n.$name="NeuSum",n.prototype.toAudioNode=function(){if(null===this.$outlet){for(var t=this.$context,e=this._nodes,n=t.createGain(),i=0,o=e.length;o>i;i++)t.connect(e[i],n);this._param&&t.connect(this._param,n),this._number&&t.connect(this._number,n),this.$outlet=n}return this.$outlet},n.prototype.connect=function(t){for(var e=this.$context,n=this._number,i=this._param,o=this._nodes,r=0,s=o.length;s>r;r++)e.connect(e.toAudioNode(o[r]),t);return i?(e.connect(i,t),0!==n&&e.connect(e.createNeuDC(n).toAudioNode(),t)):0!==n&&e.connect(n,t),this},n.prototype.disconnect=function(){for(var t=this.$context,e=this._inputs,n=0,i=e.length;i>n;n++)t.disconnect(e[n]);return this},e.exports=i.NeuSum=n},{"../util":49,"./component":2}],7:[function(t,e){"use strict";e.exports={PROCESS_BUF_SIZE:1024,DC_BUF_SIZE:128,WS_CURVE_SIZE:4096,MAX_RENDERING_SEC:180,MAX_DELAY_SEC:180,AUDIO_BUS_CHANNELS:1023,DEFAULT_MAX_NODES_OF_BUS:64}},{}],8:[function(t,e){"use strict";function n(t){this.$context=t,this.$outlet=t.createGain(),this.$maxNodes=i.DEFAULT_MAX_NODES_OF_BUS,this.$inputs=[],Object.defineProperties(this,{maxNodes:{set:function(t){this.$maxNodes=Math.max(0,o.int(t))},get:function(){return this.$maxNodes}},nodes:{get:function(){return this.$inputs.slice()}}})}var i=t("../const"),o=t("../util");n.$name="NeuAudioBus",n.prototype.fade=function(t,e,n){t=o.finite(this.$context.toSeconds(t))||this.$context.currentTime,e=o.finite(e),n=o.finite(this.$context.toSeconds(n));var i=this.$outlet.gain.value,r=e,s=i+.99*(r-i),u=-Math.max(1e-6,n)/Math.log((s-r)/(i-r));return this.$outlet.gain.setTargetAtTime(r,t,u),this.$outlet.gain.setValueAtTime(r,t+n),this},n.prototype.toAudioNode=function(){return this.$outlet},n.prototype.connect=function(t){return this.$context.connect(this.$outlet,t),this},n.prototype.disconnect=function(){return this},n.prototype.onconnected=function(t){var e=this.$inputs.indexOf(t);for(-1!==e&&this.$inputs.splice(e,1),this.$inputs.push(t);this.$maxNodes<this.$inputs.length;)this.$context.disconnect(this.$inputs.shift());t.$outputs=t.$outputs||[],-1===t.$outputs.indexOf(this)&&t.$outputs.push(this)},n.prototype.ondisconnected=function(t){var e=this.$inputs.indexOf(t);-1!==e&&this.$inputs.splice(e,1),t.$outputs&&(e=t.$outputs.indexOf(this),-1!==e&&t.$outputs.splice(e,1))},e.exports=n},{"../const":7,"../util":49}],9:[function(t,e){(function(n){"use strict";function i(t,e){this.$context=t,this._buffer=e,Object.defineProperties(this,{sampleRate:{value:this._buffer.sampleRate,enumerable:!0},length:{value:this._buffer.length,enumerable:!0},duration:{value:this._buffer.duration,enumerable:!0},numberOfChannels:{value:this._buffer.numberOfChannels,enumerable:!0}});for(var n=0;n<this._buffer.numberOfChannels;n++)Object.defineProperty(this,n,{value:this._buffer.getChannelData(n)})}function o(t){return new Promise(function(e,i){var o=new n.XMLHttpRequest;o.open("GET",t),o.responseType="arraybuffer",o.onload=function(){e(o.response)},o.onerror=function(){i({})},o.send()})}function r(t,e){return new Promise(function(n,i){t.decodeAudioData(e,function(t){n(t)},function(){i({})})})}function s(t){var e=u(t);if(0!==e)for(var n=1/e,i=0,o=t.length;o>i;++i)t[i]*=n;return t}function u(t){for(var e=0,n=0,i=t.length;i>n;++n){var o=Math.abs(t[n]);o>e&&(e=o)}return e}function a(t,e,n){return t.length===e?new Float32Array(t):n?f(t,e):c(t,e)}function c(t,e){for(var n=(t.length-1)/(e-1),i=new Float32Array(e),o=0;e>o;o++)i[o]=t[Math.round(o*n)];return i}function f(t,e){for(var n=(t.length-1)/(e-1),i=new Float32Array(e),o=t.length-1,r=0;e>r;r++){var s=r*n,u=0|s,a=Math.min(u+1,o);i[r]=t[u]+Math.abs(s-u)*(t[a]-t[u])}return i}var l=t("../util"),h=t("../dsp/fft");i.$name="NeuBuffer",i.create=function(t,e,n,o){return e=l.int(l.defaults(e,1)),n=l.int(l.defaults(n,0)),o=l.int(l.defaults(o,t.sampleRate)),new i(t,t.createBuffer(e,n,o))},i.from=function(t,e){var n=t.createBuffer(1,e.length,t.sampleRate);return n.getChannelData(0).set(e),new i(t,n)},i.load=function(t,e){return new Promise(function(n,s){o(e).then(function(e){return r(t,e)}).then(function(e){n(new i(t,e))}).catch(function(t){s(t)})})},i.prototype.getChannelData=function(t){return t=l.clip(l.int(t),0,this.numberOfChannels-1),this._buffer.getChannelData(t)},i.prototype.concat=function(){var t=l.toArray(arguments).filter(function(t){return t instanceof i&&this.numberOfChannels===t.numberOfChannels},this),e=this.numberOfChannels,n=t.reduce(function(t,e){return t+e.length},this.length),o=this.sampleRate,r=this.$context.createBuffer(e,n,o);t.unshift(this);for(var s=t.length,u=0;e>u;u++)for(var a=r.getChannelData(u),c=0,f=0;s>f;f++)a.set(t[f][u],c),c+=t[f].length;return new i(this.$context,r)},i.prototype.reverse=function(){for(var t=this.numberOfChannels,e=this.$context.createBuffer(t,this.length,this.sampleRate),n=0;t>n;n++)e.getChannelData(n).set(l.toArray(this[n]).reverse());return new i(this.$context,e)},i.prototype.slice=function(t,e){t=l.int(l.defaults(t,0)),e=l.int(l.defaults(e,this.length)),0>t?t+=this.length:t=Math.min(t,this.length),0>e?e+=this.length:e=Math.min(e,this.length);var n=this.numberOfChannels,o=e-t,r=this.sampleRate,s=null;if(0>=o)s=this.$context.createBuffer(n,1,r);else{s=this.$context.createBuffer(n,o,r);for(var u=0;n>u;u++)s.getChannelData(u).set(this[u].subarray(t,e))}return new i(this.$context,s)},i.prototype.split=function(t){if(t=l.int(l.defaults(t,2)),0>=t)return[];for(var e=new Array(t),n=this.length/t,i=0,o=0,r=0;t>r;r++)o=Math.round(i+n),e[r]=this.slice(i,o),i=o;return e},i.prototype.normalize=function(){for(var t=this.numberOfChannels,e=this.$context.createBuffer(t,this.length,this.sampleRate),n=0;t>n;n++)e.getChannelData(n).set(s(this[n]));return new i(this.$context,e)},i.prototype.resample=function(t,e){t=Math.max(0,l.int(l.defaults(t,this.length))),e=!!l.defaults(e,!0);for(var n=this.numberOfChannels,o=this.$context.createBuffer(n,t,this.sampleRate),r=0;n>r;r++)o.getChannelData(r).set(a(this[r],t,e));return new i(this.$context,o)},i.prototype.toAudioBuffer=function(){return this._buffer},i.prototype.toPeriodicWave=function(t){t=l.clip(l.int(t),0,this.numberOfChannels-1);var e=this._buffer.getChannelData(t);4096<e.length&&(e=e.subarray(0,4096));var n=h.forward(e);return this.$context.createPeriodicWave(n.real,n.imag)},e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dsp/fft":16,"../util":49}],10:[function(t,e){"use strict";function n(t,e,n){this.$context=t,this._minInterval=1/t.sampleRate,/\d+(ticks|n)|\d+\.\d+\.\d+/.test(e)?(this._relative=!0,this._interval=e):(this._relative=!1,this._interval=Math.max(this._minInterval,o.finite(t.toSeconds(e)))),this._callback=n,this._oninterval=i.bind(this),this._state=r,this._stateString="UNSCHEDULED",this._startTime=0,this._stopTime=1/0,this._count=0,Object.defineProperties(this,{context:{value:this.$context,enumerable:!0},outlet:{value:null,enumerable:!0},state:{get:function(){return this._stateString},enumerable:!0}})}function i(t){if(t<this._stopTime){this._callback({playbackTime:t,count:this._count++});var e=this._relative?t+Math.max(this._minInterval,o.finite(this.$context.toSeconds(this._interval))):this._startTime+this._interval*this._count;this.$context.sched(e,this._oninterval)}}var o=t("../util"),r=0,s=1,u=2;n.$name="NeuInterval",n.prototype.start=function(t){return t=o.finite(this.$context.toSeconds(t))||this.$context.currentTime,this._state===r&&(this._state=s,this._stateString="SCHEDULED",this._startTime=t,o.isFunction(this._callback)&&this.$context.sched(this._startTime,function(t){this._stateString="PLAYING",this._oninterval(t)},this),this.$context.start()),this},n.prototype.stop=function(t){return t=o.finite(this.$context.toSeconds(t))||this.$context.currentTime,this._state===s&&(this._state=u,this._stopTime=t,this.$context.sched(this._stopTime,function(){this._stateString="FINISHED"},this)),this},e.exports=n},{"../util":49}],11:[function(t,e){"use strict";function n(t,e,n){e=i.finite(t.toSeconds(e)),this.$context=t,this._interval=Math.max(0,e),this._callback=n,this._state=o,this._stateString="UNSCHEDULED",this._startTime=0,this._stopTime=1/0,this._count=0,Object.defineProperties(this,{context:{value:this.$context,enumerable:!0},outlet:{value:null,enumerable:!0},state:{get:function(){return this._stateString},enumerable:!0}})}var i=t("../util"),o=0,r=1,s=2;n.$name="NeuTimeout",n.prototype.start=function(t){return t=i.finite(this.$context.toSeconds(t))||this.$context.currentTime,this._state===o&&(this._state=r,this._stateString="SCHEDULED",this._startTime=t+this._interval,i.isFunction(this._callback)&&this.$context.sched(this._startTime,function(t){t<this._stopTime&&(this._stateString="PLAYING",this._callback({playbackTime:t,count:0})),this._state=s,this._stopTime=t,this._stateString="FINISHED"},this),this.$context.start()),this},n.prototype.stop=function(t){return t=i.finite(this.$context.toSeconds(t))||this.$context.currentTime,this._state===r&&(this._state=s,this._stopTime=t,this.$context.sched(this._stopTime,function(){this._stateString="FINISHED"},this)),this},e.exports=n},{"../util":49}],12:[function(t,e){(function(n){"use strict";function i(t,e,n){n=n||{},this.$context=t.context,this.$destination=t,this._transport=new c(this),this.$analyser=this.$context.createAnalyser(),this.connect(this.$analyser,this.$destination),this._scriptProcessor=null,this._audioBuses=[],this._processBufSize=a.int(a.defaults(n.processBufSize,u.PROCESS_BUF_SIZE)),this.$inlet=null,this.$outlet=this.$analyser,Object.defineProperties(this,{context:{value:this,enumerable:!0},audioContext:{value:this.$context,enumerable:!0},sampleRate:{value:this.$context.sampleRate,enumerable:!0},currentTime:{get:function(){return this._currentTime||this.$context.currentTime},enumerable:!0},bpm:{get:function(){return this._transport.getBpm()},set:function(t){this._transport.setBpm(t)},enumerable:!0},destination:{value:t,enumerable:!0},listener:{value:this.$context.listener,enumerable:!0}}),this._duration=e,this.reset()}function o(){this._currentTimeIncr=a.clip(a.finite(this._duration),0,g),s.call(this,{playbackTime:0})}function r(){var t=this.$context,e=t.createScriptProcessor(this._processBufSize,1,1),n=t.createBufferSource();this._currentTimeIncr=this._processBufSize/t.sampleRate,this._scriptProcessor=e,e.onaudioprocess=s.bind(this),n.start(0),this.connect(n,e),this.connect(e,t.destination)}function s(t){var e=t.playbackTime||this.$context.currentTime,n=e+this._currentTimeIncr,i=this._events;for(this._currentTime=e,this._nextTicks.splice(0).forEach(function(t){t(e)});i.length&&i[0].time<=n;){var o=i.shift();this._currentTime=Math.max(this._currentTime,o.time),o.callback.call(o.context,o.time)}}var u=t("../const"),a=t("../util"),c=t("./transport"),f=t("../component/component"),l=t("../component/dc"),h=t("../component/sum"),p=t("../component/param"),d=t("../component/drywet"),m=t("../control/audio-bus"),v=t("../synth/ugen"),y=0,x=1,g=u.MAX_RENDERING_SEC,$=1;i.$name="NeuContext",Object.keys(n.AudioContext.prototype).forEach(function(t){var e=Object.getOwnPropertyDescriptor(n.AudioContext.prototype,t);if("function"==typeof e.value){var o=n.AudioContext.prototype[t];i.prototype[t]=function(){return o.apply(this.$context,arguments)}}}),i.prototype.createNeuComponent=function(t){return new f(this,t)},i.prototype.createNeuDC=function(t){return new l(this,a.finite(t))},i.prototype.createNeuSum=function(t){return new h(this,t)},i.prototype.createNeuParam=function(t,e){return new p(this,a.finite(t),e)},i.prototype.createNeuDryWet=function(t,e,n){return new d(this,t,e,n)},i.prototype.getAudioBus=function(t){return t=a.clip(a.int(a.defaults(t,0)),0,u.AUDIO_BUS_CHANNELS),this._audioBuses[t]||(this._audioBuses[t]=new m(this)),this._audioBuses[t]},i.prototype.reset=function(){return this.$inlet&&this.$inlet.disconnect(),this._audioBuses=[],this.$inlet=this._audioBuses[0]=this.getAudioBus(0),this.connect(this.$inlet,this.$analyser),this.disconnect(this._scriptProcessor),this._events=[],this._nextTicks=[],this._state=y,this._currentTime=0,this._scriptProcessor=null,this},i.prototype.start=function(){return this._state===y&&(this._state=x,this.$context instanceof n.OfflineAudioContext?o.call(this):r.call(this)),this},i.prototype.stop=function(){return this},i.prototype.sched=function(t,e,n){if(t=a.finite(t),!a.isFunction(e))return 0;var i=this._events,o={id:$++,time:t,callback:e,context:n||this};if(0===i.length||i[i.length-1].time<=t)i.push(o);else for(var r=0,s=i.length;s>r;r++)if(t<i[r].time){i.splice(r,0,o);break}return o.id},i.prototype.unsched=function(t){if(t=a.finite(t),0!==t)for(var e=this._events,n=0,i=e.length;i>n;n++)if(t===e[n].id){e.splice(n,1);break}return t},i.prototype.nextTick=function(t,e){return this._nextTicks.push(t.bind(e||this)),this},i.prototype.toAudioNode=function(t){return t&&t.toAudioNode?t=t.toAudioNode():"number"==typeof t&&(t=this.createNeuDC(t).toAudioNode()),t instanceof n.AudioNode||(t=null),t},i.prototype.toAudioBuffer=function(t){return t&&t.toAudioBuffer?t.toAudioBuffer():(t instanceof n.AudioBuffer||(t=null),t)},i.prototype.connect=function(t,e){return e&&(t instanceof f||t instanceof v?t.connect(e):e instanceof n.AudioParam?"number"==typeof t?e.value=a.finite(t):(t=this.toAudioNode(t),t&&t.connect(e)):e instanceof n.AudioNode?(t=this.toAudioNode(t),t&&t.connect(e)):e instanceof m&&this.connect(t,e.toAudioNode()),e.onconnected&&e.onconnected(t)),this},i.prototype.disconnect=function(t){return t&&t.disconnect&&(t.disconnect(),t.$outputs&&t.$outputs.forEach(function(e){return e.ondisconnected&&e.ondisconnected(t)})),this},i.prototype.getBpm=function(){return this._transport.getBpm()},i.prototype.setBpm=function(t,e){return this._transport.setBpm(t,e),this},i.prototype.toSeconds=function(t){return this._transport.toSeconds(t)},i.prototype.toFrequency=function(t){return this._transport.toFrequency(t)},e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../component/component":2,"../component/dc":3,"../component/drywet":4,"../component/param":5,"../component/sum":6,"../const":7,"../control/audio-bus":8,"../synth/ugen":24,"../util":49,"./transport":15}],13:[function(t,e){(function(n){"use strict";function i(t){function e(e){return new s.SynthDef(t,e)}return Object.defineProperties(e,{audioContext:{value:t.audioContext,enumerable:!0},context:{value:t,enumerable:!0},destination:{value:t.$destination,enumerable:!0},sampleRate:{value:t.sampleRate,enumerable:!0},currentTime:{get:function(){return t.currentTime},enumerable:!0},Synth:{value:function(e){return new s.SynthDef(t,e).apply(null,o.toArray(arguments).slice(1))},enumerable:!0},Buffer:{value:Object.defineProperties(function(e,n,i){return s.Buffer.create(t,e,n,i)},{from:{value:function(e){return s.Buffer.from(t,e)},enumerable:!0},load:{value:function(e){return s.Buffer.load(t,e)},enumerable:!0}}),enumerable:!0},Interval:{value:function(e,n){return new s.Interval(t,e,n)},enumerable:!0},Timeout:{value:function(e,n){return new s.Timeout(t,e,n)},enumerable:!0},toSeconds:{value:function(e){return t.toSeconds(e)}},toFrequency:{value:function(e){return t.toFrequency(e)}}}),e}t("./shim");var o=t("../util"),r="0.1.0",s=function(t,e){if(t instanceof n.AudioContext&&(t=t.destination),!(t instanceof n.AudioNode))throw new TypeError("neume(): illegal argument");var r=new s.Context(t,1/0,e);return Object.defineProperties(new i(r),{render:{value:function(t,e){var u=r.sampleRate,a=o.int(u*t);return new Promise(function(o){var c=new n.OfflineAudioContext(2,a,u);c.oncomplete=function(t){o(new s.Buffer(r,t.renderedBuffer))},e(new i(new s.Context(c.destination,t))),c.startRendering()})}},analyser:{value:r.$analyser,enumerable:!0}})};s.util=o,s.Context=t("./context"),s.Transport=t("./transport"),s.Component=t("../component/component"),s.DC=t("../component/dc"),s.DryWet=t("../component/drywet"),s.Sum=t("../component/sum"),s.Param=t("../component/param"),s.AudioBus=t("../control/audio-bus"),s.Buffer=t("../control/buffer"),s.Interval=t("../control/interval"),s.Timeout=t("../control/timeout"),s.FFT=t("../dsp/fft"),s.Emitter=t("../event/emitter"),s.SynthDB=t("../synth/db"),s.Synth=t("../synth/synth"),s.SynthDef=t("../synth/synthdef"),s.UGen=t("../synth/ugen"),s.Unit=t("../synth/unit"),function(t){Object.keys(t).forEach(function(e){s[e]=t[e]})}(t("../const")),s.register=function(t,e){return s.UGen.register(t,e),s},s.use=function(t){return-1===s.use.used.indexOf(t)&&(t(s,o),s.use.used.push(t)),s},s.use.used=[],s.version=r,e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../component/component":2,"../component/dc":3,"../component/drywet":4,"../component/param":5,"../component/sum":6,"../const":7,"../control/audio-bus":8,"../control/buffer":9,"../control/interval":10,"../control/timeout":11,"../dsp/fft":16,"../event/emitter":17,"../synth/db":20,"../synth/synth":22,"../synth/synthdef":23,"../synth/ugen":24,"../synth/unit":25,"../util":49,"./context":12,"./shim":14,"./transport":15}],14:[function(){(function(t){!function(){"use strict";t.AudioContext=t.AudioContext||t.webkitAudioContext,t.OfflineAudioContext=t.OfflineAudioContext||t.webkitOfflineAudioContext,"undefined"!=typeof t.AudioContext&&("function"!=typeof t.AudioContext.prototype.createGain&&(t.AudioContext.prototype.createGain=t.AudioContext.prototype.createGainNode),"function"!=typeof t.AudioContext.prototype.createDelay&&(t.AudioContext.prototype.createDelay=t.AudioContext.prototype.createDelayNode),"function"!=typeof t.AudioContext.prototype.createPeriodicWave&&(t.AudioContext.prototype.createPeriodicWave=t.AudioContext.prototype.createWaveTable),"function"!=typeof t.AudioBufferSourceNode.prototype.start&&(t.AudioBufferSourceNode.prototype.start=t.AudioBufferSourceNode.prototype.noteGrainOn),"function"!=typeof t.AudioBufferSourceNode.prototype.stop&&(t.AudioBufferSourceNode.prototype.stop=t.AudioBufferSourceNode.prototype.noteOff),"function"!=typeof t.OscillatorNode.prototype.start&&(t.OscillatorNode.prototype.start=t.OscillatorNode.prototype.noteOn),"function"!=typeof t.OscillatorNode.prototype.stop&&(t.OscillatorNode.prototype.stop=t.OscillatorNode.prototype.noteOff),"function"!=typeof t.OscillatorNode.prototype.setPeriodicWave&&(t.OscillatorNode.prototype.setPeriodicWave=t.OscillatorNode.prototype.setWaveTable),"undefined"==typeof t.PeriodicWave&&"undefined"!=typeof t.WaveTable&&(t.PeriodicWave=t.WaveTable,t.WaveTable.$name="PeriodicWave"))}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(require,module,exports){"use strict";function NeuTransport(t){this.$context=t,this._bpm=120,this._ramp=null}function ticks2sec(t,e){return 60/e*(t/480)}function note2sec(t,e,n){var i={nt:2/3,nd:1.5}[e]||1;return 0===t?0:ticks2sec(4/t*480*i,n)}var util=require("../util");NeuTransport.$name="NeuTransport",NeuTransport.prototype.getBpm=function(){var t=this._ramp;if(null!==t){var e=this.$context.currentTime;if(t.t1<=e)this._bpm=t.v1,this._ramp=null;else{var n=(e-t.t0)/(t.t1-t.t0);this._bpm=t.v0*Math.pow(t.v1/t.v0,n)}}return this._bpm},NeuTransport.prototype.setBpm=function(t,e){e=this.toSeconds(util.defaults(e,0));var n=util.clip(util.finite(t),1,1e3);if(0>=e)this._bpm=n,this._ramp=null;else{var i=this.$context.currentTime;this._ramp={v0:this.getBpm(),t0:i,v1:n,t1:i+e}}return this},NeuTransport.prototype.toSeconds=function(value){if("number"==typeof value)return util.finite(value);if("string"==typeof value){var m,offset=0,time=0;"+"===value.charAt(0)&&(offset=this.$context.currentTime,value=value.slice(1));var components=value.split(/[\(\)\-\+\/\*]/);if(components.length>1){for(var oringalTime=value,expr=value,i=0,imax=components.length;imax>i;i++){var symb=components[i].trim();""!==symb&&(expr=expr.replace(symb,this.toSeconds(symb)))}try{time=eval(expr)}catch(e){throw new EvalError("Invalid Time Value Syntax: "+oringalTime)}}else if(null!==(m=/^(\d+)ms$/.exec(value)))time=.001*+m[1];else if(null!==(m=/^(\d+(?:\.\d+)?)hz$/.exec(value)))time=util.finite(1/+m[1]);else if(null!==(m=/^(\d+)ticks$/.exec(value)))time=ticks2sec(+m[1],this.getBpm());else if(null!==(m=/^(\d+)(n[td]?)$/.exec(value)))time=note2sec(+m[1],m[2],this.getBpm());else if(null!==(m=/^(\d+)\.(\d+)\.(\d+)$/.exec(value)))time=ticks2sec(480*(4*+m[1]+ +m[2])+ +m[3],this.getBpm());else if(null!==(m=/^(\d\d):(\d\d):(\d\d)(?:\.(\d+))?$/.exec(value)))time=3600*+m[1]+60*+m[2]+ +m[3]+.001*((m[4]||"")+"000").substr(0,3);else if(null!==(m=/^(\d+)samples$/.exec(value)))time=+m[1]/this.$context.sampleRate;else{if("now"===value)return this.$context.currentTime;time=util.finite(+value)}return time+offset}return value},NeuTransport.prototype.toFrequency=function(t){return"number"==typeof t?util.finite(t):"string"==typeof t?util.finite(1/this.toSeconds(t)):t},module.exports=NeuTransport},{"../util":49}],16:[function(t,e){"use strict";function n(t){var e,n,i,o,u,a,c,f,l,h,p,d=1<<Math.ceil(Math.log(s.finite(t.length))*Math.LOG2E),m=new Float32Array(d),v=new Float32Array(d),y=new Float32Array(d),x=r(d),g=x.bitrev,$=x.sintable,_=x.costable;for(e=0;d>e;e++)m[e]=t[e],v[e]=t[g[e]],y[e]=0;for(i=1;d>i;i=o)for(u=0,o=i+i,a=d/o,n=0;i>n;n++){for(c=_[u],f=$[u],e=n;d>e;e+=o)l=e+i,h=f*y[l]+c*v[l],p=c*y[l]-f*v[l],v[l]=v[e]-h,y[l]=y[e]-p,v[e]+=h,y[e]+=p;u+=a}return{real:v,imag:y}}function i(t,e){var n,i,o,u,a,c,f,l,h,p,d,m=1<<Math.ceil(Math.log(s.finite(t.length))*Math.LOG2E),v=new Float32Array(m),y=new Float32Array(m),x=new Float32Array(m),g=r(m),$=g.bitrev,_=g.sintable,b=g.costable;for(n=0;m>n;n++)i=$[n],y[n]=+t[i],x[n]=-e[i];for(o=1;m>o;o=u)for(a=0,u=o+o,c=m/u,i=0;o>i;i++){for(f=b[a],l=_[a],n=i;m>n;n+=u)h=n+o,p=l*x[h]+f*y[h],d=f*x[h]-l*y[h],y[h]=y[n]-p,x[h]=x[n]-d,y[n]+=p,x[n]+=d;a+=c}for(n=0;m>n;n++)v[n]=y[n]/m;return v}function o(t){for(var e=new Int16Array(t),n=t>>1,i=0,o=0;;){if(e[i]=o,++i>=t)break;for(var r=n;o>=r;)o-=r,r>>=1;o+=r}return e}function r(t){if(r.cache[t])return r.cache[t];for(var e=o(t),n=Math.floor(Math.log(t)/Math.LN2),i=new Float32Array((1<<n)-1),s=new Float32Array((1<<n)-1),u=0,a=i.length;a>u;u++)i[u]=Math.sin(2*Math.PI*(u/t)),s[u]=Math.cos(2*Math.PI*(u/t));return r.cache[t]={bitrev:e,sintable:i,costable:s},r.cache[t]}var s=t("../util");r.cache=[],e.exports={forward:n,inverse:i}},{"../util":49}],17:[function(t,e){"use strict";function n(){this._callbacks={}}n.prototype.hasListeners=function(t){return this._callbacks.hasOwnProperty(t)},n.prototype.listeners=function(t){return this.hasListeners(t)?this._callbacks[t].slice():[]},n.prototype.on=function(t,e){return this.hasListeners(t)||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},n.prototype.once=function(t,e){function n(i){this.off(t,n),e.call(this,i)}return n.listener=e,this.on(t,n),this},n.prototype.off=function(t,e){return"undefined"==typeof e?"undefined"==typeof t?this._callbacks={}:this.hasListeners(t)&&delete this._callbacks[t]:this.hasListeners(t)&&(this._callbacks[t]=this._callbacks[t].filter(function(t){return!(t===e||t.listener===e)})),this},n.prototype.emit=function(t,e,n){this.listeners(t).forEach(function(t){t.call(this,e)},n||this)},e.exports=n},{}],18:[function(t,e){e.exports=t("./core/neume")},{"./core/neume":13}],19:[function(t,e){"use strict";function n(t){var e=o.exec(t);return!!e&&e[0]===t}function i(t){t=String(t);var e={key:"",id:null,"class":[]},n=t.match(o);n&&(e.key=n[0],t=t.substr(e.key.length));var i=t.match(/[.#][a-zA-Z](-?[a-zA-Z0-9]+)*/g);return i&&i.forEach(function(t){var n=t.charAt(0);"#"===n?e.id||(e.id=t.substr(1)):e.class.push(t.substr(1))}),e}var o=/^([a-zA-Z](-?[a-zA-Z0-9]+)*!?\??~?|[-+*\/%<=>!?&|@]+~?)/;e.exports={isValidUGenName:n,parse:i}},{}],20:[function(t,e){"use strict";function n(){this._all=[],this._ids={}}var i=t("../util"),o=t("../parser/selector");n.prototype.append=function(t){return i.isObject(t)&&(this._all.push(t),t.hasOwnProperty("$id")&&(this._ids[t.$id]=t)),this},n.$name="NeuSynthDB",n.prototype.all=function(){return this._all},n.prototype.find=function(t){var e=null,n=o.parse(t);return e=n.id?this._ids[n.id]?[this._ids[n.id]]:[]:this._all,n.class.forEach(function(t){e=e.filter(function(e){return-1!==e.$class.indexOf(t)})}),n.key&&(e=e.filter(function(t){return t.$key===n.key})),e},e.exports=n},{"../parser/selector":19,"../util":49}],21:[function(t,e){"use strict";function n(t){function e(){var e=f.toArray(arguments),i=e.shift(),o=f.isDictionary(e[0])?e.shift():{},r=Array.prototype.concat.apply([],e),s=p.build(t,i,o,r);return n.append(s),s}var n=new h;this.db=n,this.params={},this.methods={},this.timers=[],e.param=i(t,this.params),e.method=o(t,this.methods),e.timeout=r(t,this.timers),e.interval=s(t,this.timers),e.sec=u(t),e.freq=a(t),this.builder=e}function i(t,e){return function(n,i){if(e.hasOwnProperty(n))return e[n];i=f.finite(f.defaults(i,0)),c(n,i);var o=new l(t.$context,i);return Object.defineProperty(t,n,{set:function(t){o.set(t)},get:function(){return o}}),e[n]=o,o
}}function o(t,e){return function(t,n){/^[a-z]\w*$/.test(t)&&"function"==typeof n&&(e[t]=n)}}function r(t,e){var n=t.$context;return function(i){function o(e){r=n.sched(e,function(e){r=0;for(var n=0,i=s.length;i>n;n++)s[n].call(t,e,1)})}i=Math.max(0,f.finite(n.toSeconds(i)));var r=0,s=f.toArray(arguments).slice(1).filter(f.isFunction);e.push({start:function(t){o(t+i)},stop:function(){n.unsched(r),r=0}})}}function s(t,e){var n=t.$context,i=1/n.sampleRate;return function(o){function r(e){u=n.sched(e,function(e){u=0,l+=1;for(var h=0,p=a.length;p>h;h++)a[h].call(t,e,l);var d=s?e+Math.max(i,f.finite(n.toSeconds(o))):c+o*(l+1);r(d)})}var s;/\d+(ticks|n)|\d+\.\d+\.\d+/.test(o)?s=!0:(s=!1,o=Math.max(i,f.finite(n.toSeconds(o))));var u=0,a=f.toArray(arguments).slice(1).filter(f.isFunction),c=0,l=0;e.push({start:function(t){c=t;var e=s?c+Math.max(i,f.finite(n.toSeconds(o))):c+o;r(e)},stop:function(){n.unsched(u),u=0}})}}function u(t){return function(e){return t.$context.toSeconds(e)}}function a(t){return function(e){return t.$context.toFrequency(e)}}function c(t){if(!/^[a-z]\w*$/.test(t))throw new TypeError(f.format("invalid parameter name: #{name}",{name:t}))}var f=t("../util"),l=t("../component/param"),h=t("./db"),p=t("./ugen");e.exports=n},{"../component/param":5,"../util":49,"./db":20,"./ugen":24}],22:[function(t,e){"use strict";function n(t,e,n){this.$context=t,this.$routes=[],this.$localBuses=[];var i=new u(this),o=e.apply(null,[i.builder].concat(n));o&&o.toAudioNode&&!o.$isOutput&&(this.$routes[0]=o),this.$routes=this.$routes.map(function(e){var n=t.createGain();return t.connect(e,n),n}),this._connected=!1,this._db=this.$routes.length?i.db:a,this._state=c,this._stateString="UNSCHEDULED",this._timers=i.timers;var s=[];Object.keys(i.methods).forEach(function(t){var e=i.methods[t];s.push(t),Object.defineProperty(this,t,{value:function(){return e.apply(this,r.toArray(arguments)),this}})},this),this._db.all().forEach(function(t){Object.keys(t.$unit.$methods).forEach(function(t){this.hasOwnProperty(t)||(s.push(t),Object.defineProperty(this,t,{value:function(){return this.apply(t,r.toArray(arguments)),this}}))},this)},this),Object.defineProperties(this,{context:{value:this.$context,enumerable:!0},currentTime:{get:function(){return this.$context.currentTime},enumerable:!0},state:{get:function(){return this._stateString},enumerable:!0},methods:{value:s.sort(),enumerable:!0}})}function i(t,e,n){var i=o(e);if(i){var r=i.selector?t.find(i.selector):t.all();r.forEach(function(t){n(t,i.name)})}}function o(t){var e=/^(?:(.*?):([a-z]\w+)|([a-z]\w+))$/.exec(t);return e?null!=e[3]?{selector:null,name:e[3]}:{selector:e[1],name:e[2]}:null}var r=t("../util"),s=t("./db"),u=t("./dollar"),a=new s,c=0,f=1,l=2;n.$name="NeuSynth",n.prototype.start=function(t){return t=r.finite(this.$context.toSeconds(t))||this.$context.currentTime,this._state===c&&(this._state=f,this._stateString="SCHEDULED",this.$context.sched(t,function(){this._stateString="PLAYING"},this),this.$routes.forEach(function(t,e){this.connect(t,this.getAudioBus(e))},this.$context),this._db.all().forEach(function(e){e.$unit.start(t)}),this._timers.forEach(function(e){e.start(t)}),this.$context.start()),this},n.prototype.stop=function(t){t=r.finite(this.$context.toSeconds(t))||this.$context.currentTime;var e=this.$context;return this._state===f&&(this._state=l,e.sched(t,function(t){this._stateString="FINISHED",e.nextTick(function(){this.$routes.forEach(function(t){e.disconnect(t)})},this),this._db.all().forEach(function(e){e.$unit.stop(t)}),this._timers.forEach(function(e){e.stop(t)})},this)),this},n.prototype.fadeIn=function(t,e){if(t=r.finite(this.$context.toSeconds(t))||this.$context.currentTime,e=r.finite(this.$context.toSeconds(e)),this._state===c){var n=-Math.max(1e-6,e)/-4.605170185988091;this.$routes.forEach(function(e){e.gain.value=0,e.gain.setTargetAtTime(1,t,n)}),this.start(t)}return this},n.prototype.fadeOut=function(t,e){return t=r.finite(this.$context.toSeconds(t))||this.$context.currentTime,e=r.finite(this.$context.toSeconds(e)),this._state===f&&(this.$routes.forEach(function(n){var i=n.gain.value,o=-Math.max(1e-6,e)/Math.log(.01/i);n.gain.setTargetAtTime(0,t,o)}),this.stop(t+e)),this},n.prototype.fade=function(t,e,n){if(t=r.finite(this.$context.toSeconds(t))||this.$context.currentTime,e=r.finite(e),n=r.finite(this.$context.toSeconds(n)),this._state===f){var i=this.$routes[0].gain.value,o=e,s=i+.99*(o-i),u=-Math.max(1e-6,n)/Math.log((s-o)/(i-o));this.$routes.forEach(function(e){e.gain.setTargetAtTime(o,t,u),e.gain.setValueAtTime(o,t+n)})}return this},n.prototype.apply=function(t,e){return i(this._db,t,function(t,n){t.$unit.apply(n,e)}),this},n.prototype.call=function(){var t=r.toArray(arguments),e=t.shift();return this.apply(e,t)},n.prototype.toAudioNode=function(){return this.$context.toAudioNode(this.$routes[0])},n.prototype.hasListeners=function(t){var e=!1;return i(this._db,t,function(t,n){e=e||t.hasListeners(n)}),e},n.prototype.listeners=function(t){var e=[];return i(this._db,t,function(t,n){t.listeners(n).forEach(function(t){-1===e.indexOf(t)&&e.push(t)})}),e},n.prototype.on=function(t,e){return i(this._db,t,function(t,n){t.on(n,e)}),this},n.prototype.once=function(t,e){return i(this._db,t,function(t,n){t.once(n,e)}),this},n.prototype.off=function(t,e){return i(this._db,t,function(t,n){t.off(n,e)}),this},e.exports=n},{"../util":49,"./db":20,"./dollar":21}],23:[function(t,e){(function(n){"use strict";function i(t,e){function i(){var i=t,r=o.toArray(arguments);return r[0]instanceof n.AudioContext&&(i=r.shift()),new o.NeuSynth(i,e,r)}if(!o.isFunction(e))throw new TypeError("NeuSynthDef func is not a function");return Object.defineProperties(i,{context:{value:t,enumerable:!0}}),i}var o=t("../util");o.NeuSynth=t("./synth"),e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":49,"./synth":22}],24:[function(t,e){"use strict";function n(t,e,a,c){s.call(this);var f=u.parse(e);if(!n.registered.hasOwnProperty(f.key))throw new Error("unknown key: "+e);this.$context=t.$context,this.$synth=t,this.$key=f.key,this.$class=f.class,this.$id=f.id,this.$outlet=null;var l=n.registered[f.key](this,a,c);this._node=l.$outlet,this._node=i(this.$context,this._node,r.defaults(a.mul,1)),this._node=o(this.$context,this._node,r.defaults(a.add,0)),this.$isOutput=l.$isOutput,this.$unit=l,Object.keys(l.$methods).forEach(function(t){var e=l.$methods[t];r.definePropertyIfNotExists(this,t,{value:function(){return e.apply(this,arguments),this}})},this)}function i(t,e,n){if(1===n)return e;if(0===n)return t.createNeuDC(0);var i=t.createGain();return i.gain.value=0,t.connect(e,i),t.connect(n,i.gain),i}function o(t,e,n){return t.createNeuSum([e,n])}var r=t("../util"),s=t("../event/emitter"),u=t("../parser/selector");r.inherits(n,s),n.$name="NeuUGen",n.registered={},n.register=function(t,e){if(!u.isValidUGenName(t))throw new Error("invalid ugen name: "+t);if("function"!=typeof e)throw new TypeError("ugen must be a function");n.registered[t]=e},n.build=function(t,e,i,o){if("string"!=typeof e){var s=r.typeOf(e);"object"!=typeof e||n.registered.hasOwnProperty(s)||(s="object"),i.value=e,e=s}return new n(t,e,i,o)},n.prototype.toAudioNode=function(){return null===this.$outlet&&(this.$outlet=this.$context.toAudioNode(this._node)),this.$outlet},n.prototype.connect=function(t){return this._node.connect(t),this},n.prototype.disconnect=function(){return this._node.disconnect(),this},e.exports=n},{"../event/emitter":17,"../parser/selector":19,"../util":49}],25:[function(t,e){"use strict";function n(t){this._spec=t,this._state=o,this.$outlet=i.defaults(t.outlet,null),this.$methods=i.defaults(t.methods,{}),this.$isOutput=!!t.isOutput}var i=t("../util"),o=0,r=1,s=2;n.$name="NeuUnit",n.prototype.start=function(t){this._state===o&&i.isFunction(this._spec.start)&&(this._state=r,this._spec.start(i.finite(t)))},n.prototype.stop=function(t){this._state===r&&i.isFunction(this._spec.stop)&&(this._state=s,this._spec.stop(i.finite(t)))},n.prototype.apply=function(t,e){this.$methods[t]&&this.$methods[t].apply(null,e)},n.prototype.toAudioNode=function(){return this.$outlet},e.exports=n},{"../util":49}],26:[function(t,e){e.exports=function(t){"use strict";t.register("+",function(e,n,i){return new t.Unit({outlet:e.$context.createNeuSum(i)})})}},{}],27:[function(t,e){e.exports=function(t,e){"use strict";t.register("array",function(n,i,o){function r(t,e){var n=l,i=f(c,e);h.update(t,i,n),l=i,a=e}var s=n.$context,u=null,a=0,c=i.value,f={clip:e.clipAt,wrap:e.wrapAt,fold:e.foldAt}[i.mode]||e.clipAt;Array.isArray(c)&&0!==c.length||(c=[0]);var l=e.finite(c[0]),h=s.createNeuParam(l,i);return o.length?(u=s.createGain(),s.createNeuSum(o).connect(u),s.connect(h,u.gain)):u=h,new t.Unit({outlet:u,methods:{setValue:function(t,n){Array.isArray(n)&&s.sched(e.finite(s.toSeconds(t)),function(){c=n})},at:function(t,n){s.sched(e.finite(s.toSeconds(t)),function(t){r(t,e.int(n))})},next:function(t){s.sched(e.finite(s.toSeconds(t)),function(t){r(t,a+1)})},prev:function(t){s.sched(e.finite(s.toSeconds(t)),function(t){r(t,a-1)})}}})})}},{}],28:[function(t,e){e.exports=function(t){"use strict";function e(t,e,n){return e.numberOfInputs&&t.createNeuSum(n).connect(e),e}function n(e){return new t.Unit({outlet:e})}["AudioBufferSourceNode","MediaElementAudioSourceNode","MediaStreamAudioSourceNode","ScriptProcessorNode","GainNode","BiquadFilterNode","DelayNode","PannerNode","ConvolverNode","AnalyserNode","DynamicsCompressorNode","WaveShaperNode","OscillatorNode"].forEach(function(i){t.register(i,function(t,i,o){return n(e(t.$context,i.value,o))})})}},{}],29:[function(t,e){e.exports=function(t,e){"use strict";function n(t,n,i,o){var r=n.$context,s=r.createBiquadFilter();return s.type=t,s.frequency.value=0,s.detune.value=0,s.Q.value=0,s.gain.value=0,r.connect(e.defaults(r.toFrequency(i.freq),350),s.frequency),r.connect(e.defaults(i.detune,0),s.detune),r.connect(e.defaults(i.Q,1),s.Q),r.connect(e.defaults(i.gain,0),s.gain),r.createNeuSum(o).connect(s),s}function i(e){return new t.Unit({outlet:e})}var o={lowpass:"lowpass",highpass:"highpass",bandpass:"bandpass",lowshelf:"lowshelf",highshelf:"highshelf",peaking:"peaking",notch:"notch",allpass:"allpass",lpf:"lowpass",hpf:"highpass",bpf:"bandpass"};t.register("biquad",function(t,e,r){var s=o[e.type]||"lowpass";return i(n(s,t,e,r))}),Object.keys(o).forEach(function(e){var r=o[e];t.register(e,function(t,e,o){return i(n(r,t,e,o))})})}},{}],30:[function(t,e){e.exports=function(t,e){"use strict";t.register("boolean",function(n,i,o){function r(t,e,n,i){l.update(t,n,e),a=i}var s=n.$context,u=null,a=!!i.value,c=e.finite(e.defaults(i.true,1)),f=e.finite(e.defaults(i.false,0)),l=s.createNeuParam(a?c:f,i);return o.length?(u=s.createGain(),s.createNeuSum(o).connect(u),s.connect(l,u.gain)):u=l,new t.Unit({outlet:u,methods:{setValue:function(t,n){"boolean"==typeof n&&s.sched(e.finite(s.toSeconds(t)),function(t){var e=a?c:f,i=n?c:f;r(t,e,i,n)})},toggle:function(t){s.sched(e.finite(s.toSeconds(t)),function(t){var e=a?c:f,n=a?f:c;r(t,e,n,!a)})}}})})}},{}],31:[function(t,e){e.exports=function(t,e){"use strict";function n(n,i,o){function r(t){null!=f?a.start(t,c,f):a.start(t,c),a.onended=function(){i.emit("end",{playbackTime:u.currentTime},i.$synth)}}function s(t){a.stop(t)}var u=i.$context,a=u.createBufferSource();n=u.toAudioBuffer(n),null!=n&&(a.buffer=n),a.loop=!!e.defaults(o.loop,!1),a.loopStart=e.finite(e.defaults(o.start,0)),a.loopEnd=e.finite(e.defaults(o.end,0)),a.playbackRate.value=0,u.connect(e.defaults(o.rate,1),a.playbackRate);var c=e.finite(e.defaults(o.offset,0)),f=e.defaults(u.toSeconds(o.dur),null);return null!=f&&(f=e.finite(f)),new t.Unit({outlet:a,start:r,stop:s})}t.register("buf",function(t,e){return n(e.buf,t,e)}),t.register("AudioBuffer",function(t,e){return n(e.value,t,e)}),t.register("NeuBuffer",function(t,e){return n(e.value,t,e)})}},{}],32:[function(t,e){e.exports=function(t,e){"use strict";t.register("comp",function(n,i,o){var r=n.$context,s=r.createDynamicsCompressor();return s.threshold.value=0,s.knee.value=0,s.ratio.value=0,s.attack.value=0,s.release.value=0,r.connect(e.defaults(i.thresh,-24),s.threshold),r.connect(e.defaults(i.knee,30),s.knee),r.connect(e.defaults(i.ratio,12),s.ratio),r.connect(e.defaults(r.toSeconds(i.a),.003),s.attack),r.connect(e.defaults(r.toSeconds(i.r),.25),s.release),r.createNeuSum(o).connect(s),new t.Unit({outlet:s})})}},{}],33:[function(t,e){e.exports=function(t,e){"use strict";t.register("conv",function(n,i,o){var r=n.$context,s=null,u=r.toAudioBuffer(i.buf);return s=r.createConvolver(),null!=u&&(s.buffer=u),s.normalize=!!e.defaults(i.normalize,!0),r.createNeuSum(o).connect(s),new t.Unit({outlet:s})})}},{}],34:[function(t,e){e.exports=function(t,e){"use strict";var n=t.MAX_DELAY_SEC;t.register("delay",function(i,o,r){var s,u=i.$context,a=e.defaults(u.toSeconds(o.delay),0);"number"==typeof a?(a=e.clip(e.finite(u.toSeconds(a)),0,n),s=a):s=e.finite(e.defaults(u.toSeconds(o.maxDelayTime),1)),s=e.clip(s,1/u.sampleRate,n);var c=u.createDelay(s);return c.delayTime.value=0,u.connect(a,c.delayTime),u.createNeuSum(r).connect(c),new t.Unit({outlet:c})})}},{}],35:[function(t,e){e.exports=function(t,e){"use strict";function n(t,n){var r={},s=e.defaults(n.curve,.05);return r=n.hasOwnProperty("table")?i(t,n,s):o(t,e.toArray(n._),s)}function i(t,n,i){for(var o={init:e.finite(n.init),list:[],releaseNode:e.int(e.defaults(n.release,-1)),loopNode:e.int(e.defaults(n.loop,-1))},r=e.toArray(n.table),s=0,u=r.length;u>s;s++)Array.isArray(r[s])&&o.list.push([e.finite(r[s][0]),e.finite(t.toSeconds(r[s][1])),e.finite(e.defaults(r[s][2],i))]);return o}function o(t,n,i){for(var o={init:e.finite(n.shift()),list:[],releaseNode:-1,loopNode:-1},r=0,s=n.length;s>r;){var u=n[r++];"string"==typeof u?/^r(elease)?$/i.test(u)?o.releaseNode=o.list.length:/^l(oop)?$/i.test(u)&&(o.loopNode=o.list.length):o.list.push([e.finite(u),e.finite(t.toSeconds(n[r++])),i])}return o}function r(n,i,o,r){function s(t){y.setAt(y.valueOf(),t),a.unsched(m),a.unsched(v),m=0,d=l.length}function u(t){var n=l[d];if(null!=n){d+=1;var o=e.finite(a.toSeconds(n[1])),r=t+o,s=y.valueOf(),c=e.finite(n[0]),f=e.clip(e.finite(n[2]),1e-6,1-1e-6);if(s===c||0>=o)y.setAt(c,r);else{var v=s+(c-s)*(1-f),x=-Math.max(1e-6,o)/Math.log((v-c)/(s-c));d===l.length&&(r=t+x*Math.abs(Math.log(Math.max(1e-6,Math.abs(c))/Math.max(1e-6,Math.abs(s))))),y.targetAt(c,t,x)}p>=0&&d===h&&h>p&&(d=p),d===l.length?m=a.sched(r,function(t){m=0,i.emit("end",{playbackTime:t},i.$synth)}):d!==h&&(m=a.sched(r,u))}}var a=i.$context,c=null,f=n.init,l=n.list,h=n.releaseNode,p=n.loopNode,d=0,m=0,v=0,y=a.createNeuParam(f);return r.length?(c=a.createGain(),a.createNeuSum(r).connect(c),a.connect(y,c.gain)):c=y,new t.Unit({outlet:c,start:function(t){a.sched(t,u)},stop:s,methods:{release:function(t){h>0&&0===v&&(v=a.sched(e.finite(a.toSeconds(t)),function(t){a.unsched(m),m=0,d=h,u(t)}))}}})}t.register("env",function(t,e,i){var o=n(t.$context,e);return r(o,t,e,i)}),t.register("adsr",function(t,n,i){var o=e.defaults(n.a,.01),s=e.defaults(n.d,.3),u=e.defaults(n.s,.5),a=e.defaults(n.r,1),c=e.defaults(n.curve,.05),f=0,l=[[1,o,c],[u,s,c],[0,a,c]],h=2;return r({init:f,list:l,releaseNode:h,loopNode:-1},t,n,i)}),t.register("dadsr",function(t,n,i){var o=e.defaults(n.delay,.1),s=e.defaults(n.a,.01),u=e.defaults(n.d,.3),a=e.defaults(n.s,.5),c=e.defaults(n.r,1),f=e.defaults(n.curve,.05),l=0,h=[[0,o,f],[1,s,f],[a,u,f],[0,c,f]],p=3;return r({init:l,list:h,releaseNode:p,loopNode:-1},t,n,i)}),t.register("asr",function(t,n,i){var o=e.defaults(n.a,.01),s=e.defaults(n.s,1),u=e.defaults(n.r,1),a=e.defaults(n.curve,.05),c=0,f=[[s,o,a],[0,u,a]],l=1;return r({init:c,list:f,releaseNode:l,loopNode:-1},t,n,i)}),t.register("cutoff",function(t,n,i){var o=e.defaults(n.r,.1),s=e.defaults(n.level,1),u=e.defaults(n.curve,.05),a=s,c=[[s,0,0],[0,o,u]],f=1;return r({init:a,list:c,releaseNode:f,loopNode:-1},t,n,i)})}},{}],36:[function(t,e){e.exports=function(t,e){"use strict";var n=function(){};t.register("function",function(i,o,r){function s(t){var e=l,n=c(t,f++);h.update(t,n,e),l=n}var u=i.$context,a=null,c="function"==typeof o.value?o.value:n,f=0,l=e.finite(c(0,f++)),h=u.createNeuParam(l,o);return r.length?(a=u.createGain(),u.createNeuSum(r).connect(a),u.connect(h,a.gain)):a=h,new t.Unit({outlet:a,methods:{setValue:function(t,n){"function"==typeof n&&u.sched(e.finite(u.toSeconds(t)),function(){c=n})},evaluate:function(t){u.sched(e.finite(u.toSeconds(t)),function(t){s(t)})}}})})}},{}],37:[function(t,e){e.exports=function(e){"use strict";e.use(t("./add")),e.use(t("./array")),e.use(t("./audio-node")),e.use(t("./biquad")),e.use(t("./boolean")),e.use(t("./buf")),e.use(t("./comp")),e.use(t("./conv")),e.use(t("./delay")),e.use(t("./env")),e.use(t("./function")),e.use(t("./inout")),e.use(t("./iter")),e.use(t("./line")),e.use(t("./mono")),e.use(t("./mul")),e.use(t("./noise")),e.use(t("./number")),e.use(t("./object")),e.use(t("./osc")),e.use(t("./pan2")),e.use(t("./shaper"))}},{"./add":26,"./array":27,"./audio-node":28,"./biquad":29,"./boolean":30,"./buf":31,"./comp":32,"./conv":33,"./delay":34,"./env":35,"./function":36,"./inout":38,"./iter":39,"./line":40,"./mono":41,"./mul":42,"./noise":43,"./number":44,"./object":45,"./osc":46,"./pan2":47,"./shaper":48}],38:[function(t,e){e.exports=function(t,e){"use strict";function n(t,n){return n=e.clip(e.int(e.defaults(n,0)),0,o),t.getAudioBus(n)}function i(t,n,i){return i=e.clip(e.int(e.defaults(i,0)),0,o),n.$localBuses[i]||(n.$localBuses[i]=t.createGain()),n.$localBuses[i]}var o=t.AUDIO_BUS_CHANNELS;t.register("in",function(i,o,r){var s=i.$context,u=null;return r=r.filter(e.isFinite).map(function(t){return n(s,t)}),u=s.createNeuSum(r),new t.Unit({outlet:u})}),t.register("out",function(n,i,r){var s=n.$context,u=n.$synth,a=s.createNeuSum(r),c=e.clip(e.int(e.defaults(i.bus,0)),0,o);return u.$routes[c]=a,new t.Unit({outlet:a,isOutput:!0})}),t.register("local-in",function(n,o,r){var s=n.$context,u=n.$synth,a=null;return r=r.filter(e.isFinite).map(function(t){return i(s,u,t)}),a=s.createNeuSum(r),new t.Unit({outlet:a})}),t.register("local-out",function(n,r,s){var u=n.$context,a=n.$synth,c=null,f=e.clip(e.int(e.defaults(r.bus,0)),0,o),l=i(u,a,f);return c=u.createNeuSum(s).connect(l),new t.Unit({outlet:c})})}},{}],39:[function(t,e){e.exports=function(t,e){"use strict";var n=0,i=1;t.register("iter",function(o,r,s){function u(){if(null==f)return{value:void 0,done:!0};var t;return"function"==typeof f.next?(t=f.next(),e.isObject(t)||(t={value:t,done:!1})):t={value:f.valueOf(),done:!1},t}var a=o.$context,c=null,f=e.defaults(r.iter,null),l=n,h=0,p=a.createNeuParam(h,r);return s.length?(c=a.createGain(),a.createNeuSum(s).connect(c),a.connect(p,c.gain)):c=p,new t.Unit({outlet:c,start:function(t){var n=u();n.done?(l=i,o.emit("end",{playbackTime:t},o.$synth)):(h=e.finite(n.value),p.setAt(h,t))},methods:{setValue:function(t,n){a.sched(e.finite(a.toSeconds(t)),function(){f=e.defaults(n,{})})},next:function(t){a.sched(e.finite(a.toSeconds(t)),function(t){if(l===n){var r,s=u();s.done?(l=i,o.emit("end",{playbackTime:t},o.$synth)):(r=e.finite(s.value),p.update(t,r,h),h=r)}})}}})})}},{}],40:[function(t,e){e.exports=function(t,e){"use strict";function n(t,n){for(var i=[e.finite(n[0])],o=1,r=n.length;r>o;o+=2)i.push([e.finite(n[o]),e.finite(t.toSeconds(n[o+1]))]);return i}function i(e,n,i,o){function r(t){var o=t,r=o;f.setAt(i[0],o);for(var s=1,a=i.length;a>s;s++)r+=i[s][1],f[e](i[s][0],r);c=u.sched(r,function(t){c=0,n.emit("end",{playbackTime:t},n.$synth)})}function s(){u.unsched(c)}var u=n.$context,a=null,c=0,f=u.createNeuParam(i[0]);return o.length?(a=u.createGain(),u.createNeuSum(o).connect(a),u.connect(f,a.gain)):a=f,new t.Unit({outlet:a,start:r,stop:s})}t.register("line",function(t,o,r){var s=o.hasOwnProperty("_")?n(t.$context,e.toArray(o._)):[e.finite(e.defaults(o.start,1)),[e.finite(e.defaults(o.end,0)),e.finite(e.defaults(t.$context.toSeconds(o.dur),1))]];return i("linTo",t,s,r)}),t.register("xline",function(t,o,r){var s=o.hasOwnProperty("_")?n(t.$context,e.toArray(o._)):[e.finite(e.defaults(o.start,1)),[e.finite(e.defaults(o.end,0)),e.finite(e.defaults(t.$context.toSeconds(o.dur),1))]];0===s[0]&&(s[0]=1e-6);for(var u=1,a=s.length;a>u;u++)0===s[u][0]&&(s[u][0]=1e-6);return i("expTo",t,s,r)})}},{}],41:[function(t,e){e.exports=function(t){"use strict";t.register("mono",function(e,n,i){var o=e.$context,r=o.createGain();return r.channelCount=1,r.channelCountMode="explicit",r.channelInterpretation="speakers",o.createNeuSum(i).connect(r),new t.Unit({outlet:r})})}},{}],42:[function(t,e){e.exports=function(t,e){"use strict";function n(t){for(var n=1,i=[],o=0,r=t.length;r>o;o++)"number"==typeof t[o]?n*=t[o]:i.push(t[o]);return{multiple:e.finite(n),nodes:i}}function i(t,e,n){var i=t.$context;if(0===n)return i.createNeuDC(0);if(0===e.length)return i.createNeuDC(n);if(1===e.length&&1===n)return e[0];1!==n&&e.push(n);for(var r,s=e[0],u=1,a=e.length;a>u;u++)r=o(i,e[u]),i.connect(s,r),s=r;return s}function o(t,e){var n=t.createGain();return"number"==typeof e?n.gain.value=e:(n.gain.value=0,t.connect(e,n.gain)),n}function r(e){return new t.Unit({outlet:e})}t.register("*",function(t,e,o){var s=n(o);return r(i(t,s.nodes,s.multiple))})}},{}],43:[function(t,e){e.exports=function(t){"use strict";function e(e,n){var i=n.$context.createBuffer(1,e.length,n.$context.sampleRate),o=n.$context.createBufferSource();return i.getChannelData(0).set(e),o.buffer=i,o.loop=!0,new t.Unit({outlet:o,start:function(t){o.start(t)},stop:function(t){o.stop(t)}})}function n(t){for(var e=new Float32Array(t),n=0,i=e.length;i>n;n++)e[n]=2*Math.random()-1;return e}function i(t){for(var e,n=new Float32Array(t),i=0,o=0,r=0,s=0,u=0,a=0,c=0,f=0,l=n.length;l>f;f++)e=2*Math.random()-1,i=.99886*i+.0555179*e,o=.99332*o+.0750759*e,r=.969*r+.153852*e,s=.8665*s+.3104856*e,u=.55*u+.5329522*e,a=-.7616*a-.016898*e,n[f]=i+o+r+s+u+a+c+.5362*e,n[f]*=.12,c=.115926*e;return n}var o=4;t.register("white",function(t){return r=r||new n(t.$context.sampleRate*o),e(r,t)}),t.register("pink",function(t){return s=s||new i(t.$context.sampleRate*o),e(s,t)});var r=null,s=null}},{}],44:[function(t,e){e.exports=function(t,e){"use strict";t.register("number",function(n,i,o){function r(t,e,n,i){c.update(t,n,e),a=i}var s=n.$context,u=null,a=e.finite(i.value),c=s.createNeuParam(a,i);return o.length?(u=s.createGain(),s.createNeuSum(o).connect(u),s.connect(c,u.gain)):u=c,new t.Unit({outlet:u,methods:{setValue:function(t,n){e.isFinite(n)&&s.sched(e.finite(s.toSeconds(t)),function(){r(t,a,n,n)})}}})})}},{}],45:[function(t,e){e.exports=function(t,e){"use strict";function n(n,i,o){function r(t){var n=e.finite(h());n!==m&&(v.update(t,n,m),m=n);var i=d?t+Math.max(p,e.finite(s.toSeconds(f))):t+f;l=s.sched(i,r)}var s=n.$context,u=null,a=e.defaults(i.value,0),c=e.defaults(i.key,""),f=e.defaults(i.interval,.25),l=0,h=null;h="string"!=typeof c&&"number"!=typeof c||!a.hasOwnProperty(c)?function(){return a.valueOf()}:"function"==typeof a[c]?function(){return a[c]()}:function(){return a[c]};var p=1/s.sampleRate,d=!0;/\d+(ticks|n)|\d+\.\d+\.\d+/.test(f)||(d=!1,f=Math.max(p,e.finite(s.toSeconds(f))));var m=e.finite(h()),v=s.createNeuParam(m,i);return o.length?(u=s.createGain(),s.createNeuSum(o).connect(u),s.connect(v,u.gain)):u=v,new t.Unit({outlet:u,start:function(t){r(t)},stop:function(){s.unsched(l),l=0}})}t.register("object",n),t.register("Float32Array",n)}},{}],46:[function(t,e){(function(t){e.exports=function(e,n){"use strict";function i(e){return t.PeriodicWave&&e instanceof t.PeriodicWave?!0:!1}function o(t,e,n,i){return i.length?a(t,e,n,i):u(t,e,n)}function r(t){var n=t.ctrl;return new e.Unit({outlet:t.outlet,start:function(t){n.start(t)},stop:function(t){n.stop(t)}})}function s(t,e,o,r){var s=t.createOscillator();return i(e)?s.setPeriodicWave(e):s.type=e,s.frequency.value=0,s.detune.value=0,t.connect(n.defaults(t.toFrequency(o.freq),r),s.frequency),t.connect(n.defaults(o.detune,0),s.detune),s}function u(t,e,n){var i=s(e.$context,t,n,440);return{outlet:i,ctrl:i}}function a(t,e,n,i){var o=e.$context,r=s(o,t,n,2),u=e.$context.createGain();return u.gain.value=0,o.connect(r,u.gain),o.createNeuSum(i).connect(u),{outlet:u,ctrl:r}}function c(t,i){if(i=n.int(256*n.clip(i,0,1)),h[i])return h[i];for(var o=new Float32Array(f),r=i*(f/256),s=0;f>s;s++)o[s]=r>s?-1:1;var u=e.FFT.forward(o),a=t.createPeriodicWave(u.real,u.imag);return h[i]=a,a}var f=e.WS_CURVE_SIZE,l={sin:"sine",square:"square",saw:"sawtooth",tri:"triangle"};e.register("osc",function(t,e,s){var u=e.type;return i(u)||(u="pulse"===u?c(t.$context,n.finite(n.defaults(e.width,.5))):l[u]||"sine"),r(o(u,t,e,s))}),e.register("PeriodicWave",function(t,e,n){var s=e.value;return i(s)||(s="sine"),r(o(s,t,e,n))}),Object.keys(l).forEach(function(t){var n=l[t];e.register(t,function(t,e,i){return r(o(n,t,e,i))})}),e.register("pulse",function(t,e,i){var s=c(t.$context,n.finite(n.defaults(e.width,.5)));return r(o(s,t,e,i))});var h=new Array(256)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(t,e){e.exports=function(t,e){"use strict";for(var n=t.WS_CURVE_SIZE,i=new Float32Array(n),o=new Float32Array(n),r=0;n>r;r++)i[r]=Math.cos(r/n*Math.PI*.5),o[r]=Math.sin(r/n*Math.PI*.5);t.register("pan2",function(n,r,s){var u=n.$context,a=u.createGain(),c=u.createGain();a.channelCount=1,a.channelCountMode="explicit",a.channelInterpretation="speakers",c.channelCount=1,c.channelCountMode="explicit",c.channelInterpretation="speakers";var f=e.defaults(r.pos,0);if("number"==typeof f)f=.5*e.clip(f,-1,1)+.5,a.gain.value=Math.cos(f*Math.PI*.5),c.gain.value=Math.sin(f*Math.PI*.5);else{var l=u.createWaveShaper(),h=u.createWaveShaper();l.curve=i,h.curve=o,u.connect(f,l),u.connect(f,h),a.gain.value=0,c.gain.value=0,l.connect(a.gain),h.connect(c.gain)}var p=u.createChannelMerger(2);return a.connect(p,0,0),c.connect(p,0,1),u.createNeuSum(s).connect(a).connect(c),new t.Unit({outlet:p})})}},{}],48:[function(t,e){e.exports=function(t,e){"use strict";function n(t,e,n,i){var o=e.$context,r=o.createWaveShaper();return t instanceof Float32Array&&(r.curve=t),r.oversample={"2x":"2x","4x":"4x"}[n.oversample]||"none",o.createNeuSum(i).connect(r),r}function i(e){return new t.Unit({outlet:e})}function o(t){return t=e.clip(t,0,1),a[t]||(a[t]=1===t?s():r(t)),a[t]}function r(t){for(var e=new Float32Array(u),n=2*t/(1-t),i=0;u>i;i++){var o=2*i/u-1;e[i]=(1+n)*o/(1+n*Math.abs(o))}return e}function s(){for(var t=new Float32Array(u),e=u>>1,n=0;u>n;n++)t[n]=e>n?-1:1;return t}var u=t.WS_CURVE_SIZE;t.register("shaper",function(t,r,s){var u=null;return u="number"==typeof r.curve?o(e.finite(r.curve)):r.curve,i(n(u,t,r,s))}),t.register("clip",function(t,e,r){var s=o(0);return i(n(s,t,e,r))});var a={}}},{}],49:[function(t,e){"use strict";var n={};n.isArray=function(t){return Array.isArray(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isDictionary=function(t){return null!=t&&t.constructor===Object},n.isFunction=function(t){return"function"==typeof t},n.isFinite=function(t){return"number"==typeof t&&isFinite(t)},n.isNaN=function(t){return t!==t},n.isNull=function(t){return null===t},n.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},n.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&null!==t},n.isString=function(t){return"string"==typeof t},n.isTypedArray=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Int8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Uint32Array||t instanceof Int32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},n.isUndefined=function(t){return void 0===t},n.toArray=function(t){return null==t?[]:Array.prototype.slice.call(t)},n.clipAt=function(t,e){return t[Math.max(0,Math.min(0|e,t.length-1))]},n.wrapAt=function(t,e){return e=0|e,e%=t.length,0>e&&(e+=t.length),t[e]},n.foldAt=function(t,e){e=0|e;var n=2*t.length-2;return e%=n,0>e&&(e+=n),t.length<=e&&(e=n-e),t[e]},n.definePropertyIfNotExists=function(t,e,n){return t.hasOwnProperty(e)||Object.defineProperty(t,e,n),t},n.format=function(t,e){return Object.keys(e).forEach(function(n){/^\w+$/.test(n)&&(t=t.replace(new RegExp("#\\{"+n+"\\}","g"),e[n]))}),t},n.num=function(t){return+t||0},n.int=function(t){return 0|+t},n.finite=function(t){return t=+t||0,n.isFinite(t)||(t=0),t},n.clip=function(t,e,n){return Math.max(e,Math.min(t,n))},n.typeOf=function(t){if(n.isNumber(t))return"number";if(n.isArray(t))return"array";if(n.isString(t))return"string";if(n.isFunction(t))return"function";if(n.isBoolean(t))return"boolean";if(n.isNull(t))return"null";if(n.isUndefined(t))return"undefined";if(n.isNaN(t))return"nan";var e;return t.constructor&&("string"==typeof t.constructor.$name?e=t.constructor.$name:t.constructor.name&&"string"==typeof t.constructor.name&&(e=t.constructor.name)),e||(e=Object.prototype.toString.call(t).slice(8,-1)),"Object"===e&&(e="object"),e},n.defaults=function(t,e){return null==t?e:t},n.inherits=function(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.exports=n},{}]},{},[1]);